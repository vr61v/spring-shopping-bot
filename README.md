# spring-shopping-bot
## Используемые технологии
- telegrambots (для ui взаимодействия пользователя с приложением)
- mongodb (хранение данных о корзинах пользователей)
- opensearch (хранение продуктов и их поиск по тексту)

## TODO:
1. Если продукт удален, то при попытке его получения из корзины
   удалить его из нее и вернуть пользователю валидную корзину с
   товарами.
2. Сделать более удобный формат взаимодействия с сущностями (изменить
   способ задачи полей в сущности при CRUD операциях).
3. Добавить способ начать оплату корзины.
4. 

Для запуска бота нужно создать нового и в application.properties
ввести новое имя и токен бота.

## Main menu
Главное меню используется для навигации по приложению с помощью кнопок.
Обычному пользователю доступны переходы в каталог товаров и казину.
В случае, если пользователь является админом, то у него открывается
возможность перейти в меню администратора, в котором доступны все CRUD
операции над сущностями приложения.

## Product menu
В каталоге товаров можно просмотреть все возможные позиции, сделать
поиск по конкретному полю и добавить товар в корзину. Поиск товара
по полю осуществляется вводом строки field:value, в случае отсутствия
выбранного поля у продукта будет возвращено исключение.

## Cart menu
В меню корзины пользователь может добавлять и удалять продукты, а
также увидеть суммарную цену всех позиций в ней.

## Admin menu
В панели администратора реализована возможность добавлять, изменять,
получить и удалить товар, категорию или производителя.
1. Для добавления новой сущности в базу данных необходимо отправить
   боту сообщение, содержащее поля и их значение для новой сущности,
   например:
```
name:Замшевые лоферы
price:48450
description:Мастера марки, основанной супругами Сантони, использовали для пошива синих лоферов мягкую замшу с бархатистой поверхностью, которая создает игру света и тени. Фактуру дополнительно подчеркнули, окрасив готовую обувь пигментами разного тона. Союзку деликатно акцентировали оранжевыми стежками, которые указывают на принадлежность бренду.
category:Лоферы
vendor:Santoni
```
При отправке такого запроса бот будет искать категорию и производителя
с указанными названиями, в случае отсутствия одного из двух параметров
будет выведено соответствующее сообщение, в случае успешного поиска
будет создан новый товар и возвращен пользователю в виде сообщения.

2. Для обновления данных сущности необходимо отправить запрос, похожий
   на запрос создания, но такой запрос должен содержать в себе id
   сущности и может не содержать обязательные поля, например:
```
id:82cb191d-d28f-40e6-bc88-8a511e819b1d
name:Замшевые супер лоферы
price:58450
```
При отправке такого запроса бот будет искать товар с введенным id,
в случае отсутствия такого товара будет выдано исключение оповещающее
об этом. Способ обновления категории и производителя такой же, как и
у создания товара. После обновления товара пользователю будет возвращен
новый товар с обновленными товарами.

3. Для получения данных о сущности необходимо отправить ее id,
   после чего бот вернет сообщение, указывающее на отсутствие
   товара, или сам товар.
4. Для удаления сущности необходимо удостовериться, то ее id не
   используется другими, в случае если id используется другим
   объектом будет возвращена ошибка удаления, если же нет, то
   сообщение об успешном удалении.